# 五金零件庫存管理 App 專案計畫

## 1. 專案簡介

本專案旨在開發一個結合行動應用程式與後端資料庫的庫存管理系統，以解決現場人員查詢零件資訊、確認庫存及提交訂購需求時的效率問題。

### 運用場景
現場工作人員在倉庫或工廠中，可透過手機 App 直接掃描零件上的條碼。App 會即時連線至後端資料庫，顯示該零件的詳細資訊（如：儲存位置、單位、每盒數量）以及歷史訂購紀錄。工作人員可根據即時資訊，直接在 App 上建立訂購需求清單，並在確認後送出至後台，等待管理者批次處理。

## 2. 現階段功能與進度

目前，專案已完成核心原型 (Prototype) 的開發，驗證了從前端 App 到後端資料庫的完整工作流程。

**已完成功能：**
*   **行動 App (Kivy):**
    *   提供使用者介面，可手動輸入零件品號進行查詢。
    *   成功查詢後，會顯示零件詳細資訊、最近訂購紀錄，並預填上次訂購數量。
    *   具備「訂購清單」功能，使用者可將多個品項加入清單，並在送出前進行修改或刪除。
    *   支援繁體中文介面顯示。
*   **後端 API (Flask):**
    *   已建立 API 端點，可根據零件品號查詢詳細資料與所有歷史訂單。
    *   已建立 API 端點，可接收前端 App 送來的訂單請求，並將其記錄到資料庫。
*   **資料庫 (SQLite):**
    *   已建立資料庫綱要 (Schema)，包含 `parts` (零件資料) 與 `orders` (訂單歷史) 兩個主要的資料表。
    *   已包含零件單位、訂單狀態等欄位，為後台管理預作準備。

## 3. 技術棧 (Technology Stack)

*   **前端 (Frontend):** Python + Kivy 框架
*   **後端 (Backend):** Python + Flask 框架
*   **資料庫 (Database):** SQLite
*   **開發環境 (Development Environment):** Python 虛擬環境 (venv)

## 4. 後台管理系統升級計畫

為了讓系統更完整，符合管理者批次處理訂單的作業模式，規劃開發一套網頁版的後台管理系統。

### 第一階段：訂單流程改造 (核心基礎)
此階段目標是改造現有訂單邏輯，為後續的管理者審核流程鋪路。
1.  **修改資料庫：**
    *   在 `orders` 資料表中新增 `status` 欄位，用以區分訂單狀態，例如：「待處理 (pending)」、「已確認 (confirmed)」。
2.  **修改後端 API：**
    *   **修改 `/api/order`：** 將手機 App 送來的訂單，其 `status` 預設為「待處理」。
    *   **新增 `/api/pending_orders` (GET)：** 提供一個 API，讓後台管理頁面能取得所有「待處理」的訂單。
    *   **新增 `/api/confirm_orders` (POST)：** 提供一個 API，讓管理者可以批次傳入訂單 ID，將其狀態從「待處理」更新為「已確認」。

### 第二階段：後台管理網頁開發
此階段目標是建立一個基礎的網頁介面，讓管理者能處理訂單。
1.  **建立訂單管理頁面 (`orders.html`)：**
    *   使用 Flask 搭配 Jinja2 樣板引擎，建立一個顯示所有「待處理」訂單的網頁。
    *   頁面以表格呈現，每筆訂單前有核取方塊供管理者勾選。
2.  **開發「確認與匯出」功能：**
    *   頁面上提供一個「確認訂單並匯出 Excel」按鈕。
    *   點擊後，前端 JavaScript 會收集所有勾選的訂單 ID，呼叫 `/api/confirm_orders` API。
    *   成功後，觸發瀏覽器下載一份包含所有已確認訂單的 Excel 報表。
3.  **開發「清除已處理訂單」功能：**
    *   提供按鈕讓管理者在完成作業後，可以將已確認的訂單從「待處理」清單中移除（或歸檔）。

### 第三階段：零件資料維護功能
此階段目標是讓管理者能脫離資料庫工具，直接在網頁上維護零件主檔。
1.  **建立零件管理頁面 (`parts.html`)：**
    *   以表格形式顯示所有零件資料。
    *   提供新增、修改、刪除零件的介面與按鈕。
2.  **開發零件 CRUD API：**
    *   在 `app.py` 中建立對應的 API 端點來處理零件的增刪改查請求。
3.  **開發 CSV 批次匯入/匯出功能：**
    *   **匯出：** 提供「匯出零件清單」按鈕，讓管理者能將所有零件資料下載為 CSV 檔案。
    *   **匯入：** 提供「上傳 CSV」介面，後端接收檔案後，依照指定格式批次新增或更新零件資料。
4.  **開發條碼匯出功能：**
    *   提供「匯出條碼」按鈕。
    *   後端使用 `python-barcode` 等函式庫，將所有零件品號生成條碼圖片，並打包成一個 PDF 檔案供管理者下載與列印。
