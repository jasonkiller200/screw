{# A macro to render pagination links #}
{% macro render_pagination(pagination, endpoint, search_term, sort_by, sort_order, per_page) %}
<div class="d-flex justify-content-between align-items-center">
    <div class="text-muted">
        <small>顯示 {{ (pagination.page - 1) * pagination.per_page + 1 }} - {{ (pagination.page - 1) * pagination.per_page + pagination.items|length }} 筆，共 {{ pagination.total }} 筆記錄</small>
    </div>
    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-end mb-0">
            {# Previous Page Link #}
            <li class="page-item {% if not pagination.has_prev %}disabled{% endif %}">
                <a class="page-link" href="{{ url_for(endpoint, page=pagination.prev_num, per_page=per_page, search=search_term, sort_by=sort_by, sort_order=sort_order) if pagination.has_prev else '#' }}">&laquo;</a>
            </li>

            {# Page Numbers #}
            {% for page_num in pagination.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
                {% if page_num %}
                    {% if page_num == pagination.page %}
                        <li class="page-item active"><span class="page-link">{{ page_num }}</span></li>
                    {% else %}
                        <li class="page-item"><a class="page-link" href="{{ url_for(endpoint, page=page_num, per_page=per_page, search=search_term, sort_by=sort_by, sort_order=sort_order) }}">{{ page_num }}</a></li>
                    {% endif %}
                {% else %}
                    <li class="page-item disabled"><span class="page-link">&hellip;</span></li>
                {% endif %}
            {% endfor %}

            {# Next Page Link #}
            <li class="page-item {% if not pagination.has_next %}disabled{% endif %}">
                <a class="page-link" href="{{ url_for(endpoint, page=pagination.next_num, per_page=per_page, search=search_term, sort_by=sort_by, sort_order=sort_order) if pagination.has_next else '#' }}">&raquo;</a>
            </li>
        </ul>
    </nav>
</div>
{% endmacro %}
